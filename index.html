<!DOCTYPE html>
<html>
<head>
    <title>Digital Access Hub</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <header>
        <h1>Digital Access Hub</h1>
        <p class="subtitle">Find digital access programs in your community</p>
    </header>

    <div class="search-panel">
        <div class="form-group">
            <label for="zip">ZIP Code</label>
            <input id="zip" placeholder="Enter ZIP">
        </div>

        <div class="form-group">
            <label for="category">Category</label>
            <select id="category">
                <option value="all">All</option>
                <option value="Internet">Internet</option>
                <option value="Training">Training</option>
                <option value="Devices">Devices</option>
            </select>
        </div>

        <button class="btn" onclick="runSearch()">Search</button>
    </div>

    <h2 class="results-title">Results</h2>
    <ul id="results" class="results-list"></ul>
</div>

<script>
async function runSearch() {
    const zip = document.getElementById("zip").value;
    const category = document.getElementById("category").value;
    const res = await fetch(`/search?zip=${zip}&category=${category}`);
    const data = await res.json();

    const list = document.getElementById("results");
    list.innerHTML = "";

    data.forEach(p => {
        const item = document.createElement("li");
        item.className = "card";
        item.innerHTML = `
          <strong class="program-title">${p.name}</strong>
          <div class="program-meta">${p.category} â€¢ ZIP ${p.zip}</div>
          <div class="program-provider">${p.provider}</div>
          <div class="program-elig">${p.eligibility}</div>
          <a href="${p.link}" target="_blank" class="btn-learn">Learn more</a>
        `;
        list.appendChild(item);
    });
}
</script>

</body>

</html>

